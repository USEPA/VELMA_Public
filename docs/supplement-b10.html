<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width">
    <meta name="charset" content="utf-8">
    <link rel="stylesheet" type="text/css" href="public/css/style.css">
    <script src="https://requirejs.org/docs/release/2.3.7/minified/require.js"> </script>
    <script src="public/js/search.js" type="module"> </script>
    <script src="public/js/suggestion.js" type="module"> </script>
    <title> </title>
  </head>
  <body class="bg-primary">
    <div class="header blue-base">
      <nav class="navbar blue-base navbar-expand"><a class="navbar-brand" href="./index.html">VELMA 2.2 HOME</a>
        <ul class="navbar-nav no-bullets">
          <li class="nav-item dropdown">VELMA 2.0 Manual
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./intro.html"><span>I. Intro</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./changes.html"><span>II. Changes from 1.0</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./about.html"><span>III. About</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./input_files.html"><span>IV. Input Files </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./new_sim_config.html"><span>V. Sim Config</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./parameter_config.html"><span>VI. Parameter Config</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">Appendicies
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./appendix_1.html"><span>Overview of VELMA's Leaf-Stem-Root (LSR) Plant Biomass Submodel</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_2.html"><span>Initializing a Spatial Data Pool Using an ASCII Grid</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_3.html"><span>Creating Initial ASCII Grid Chemistry Spatial Data Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_4.html"><span>Overview of VELMA Simulator Output</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_5.html"><span>Generating daily temperature and precipitation grids for running VELMA</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_6.html"><span>Hydrological and Biochemical Model Descriptions</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_7.html"><span>Creating Flat-Processed DEM Data For The VELMA Simulator</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">Supplemental Info (VELMA 2.1)
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./supplement-a1.html"><span>Organic Contaminant Modeling Using VELMA</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-a2.html"><span>Configure VELMA for Simulating Contaminant Fate and Transport</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-a3.html"><span>VELMA Contaminant Modeling Demonstration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-a4.html"><span>Adding Stormwater Drains for Urban &amp; Mixed-Use Watershed Applications</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b1.html"><span>Creating Flat-Processed DEM Data for the VELMA Simulator</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b2.html"><span>JPDEM Cell Highlighter</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b3.html"><span>JPDEM Flow Accumulation (Facc) Threshold Display</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b4.html"><span>JPDEM Flow Test Tool</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b5.html"><span>JPDEM Saving Data to Files</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b6.html"><span>JPDEM User-Specified Map Borders</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b7.html"><span>JPDEM User-Specified Border Mask</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b8.html"><span>JPDEM for Viewing Map Differences</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b9.html"><span>JPDEM Sub-Reach Delineations</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b10.html"><span>Flow Path Modification with the JPDEM Channel Cutter</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-c1.html"><span>VELMA Reach Mapping</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-c2.html"><span>How to Run VELMA in Parallel Mode</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-c3.html"><span>Rationale for Parallel Velma and Reach Segmentation</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d1.html"><span>Acquisition &amp; Generation of VELMA Input Data</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d2.html"><span>Soil Data Mapping and Parameter Initialization</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d3.html"><span>Initialize a Spatial Data Pool Using an Ascii Grid</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d4.html"><span>Create Initial Soil and Plant Chemistry Spatial (ASCII Grid) Data Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d5.html"><span>Create Land-zoning Maps for a VELMA Application</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d6.html"><span>Add Georeferenced Projection Information to VELMA Output ASCII Maps</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d7a.html"><span>Create Multiple-Location Weather Drivers</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d7b.html"><span>Development of Statistical Models Based on Monthly PRISM / Daymet Data</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d8.html"><span>Cell Data Writer Configuration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d9.html"><span>Set Up VELMA biomass Outputs as Inputs to BlueSky</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d10.html"><span>Default Tidewater Model Configuration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e1.html"><span>Mapping Surface Layer Permeabilities</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e2.html"><span>VELMA Surface Chemistry Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e3.html"><span>Deposition of Surface Chemicals</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e4.html"><span>Implementing Green Roof Applications</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e5.html"><span>Irrigation Disturbance</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e6.html"><span>Groundwater Storage Mechanism</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e7.html"><span>Spatial Data Writer Key Words for Generating ASCII VELMA Outputs for Data Visualization</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown"> <a class="nav-link" href="./dev_info.html"><span>Developer Info</span></a>
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./GetVelma_ForEclipse.html"><span>Clone Github to Local Machine</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./CellSpecificBurnDisturbance_Configuration_Guide.html"><span>Cell Specific Burn Disturbance Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./Configuration_Checker_Guide.html"><span>Configuration Checker Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./DefaultSedimentModel_Configuration_Guide.html"><span>Default Sediment Model Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./Sediment_Output_Data_Summary.html"><span>Sediment Output Data Summary</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ForestBurnLsrDisturbanceModel_Overview.html"><span>Forest Burn LSR Disturbance Model</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./JPDEM_ReachMapping_Demonstration.html"><span>JPDEM Reaching Mapping Demo</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./MinMaxAirT_WeatherDrivers.html"><span>Min Max Air Temp Weather Drivers</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ModifySpatialDataByMap_Guide.html"><span>Modify Spatial Data by Map Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ObsRunoff_and_NaNs.html"><span>OBS Runnoff and NaNs</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./OrganicContaminant_Overview.html"><span>Organic Contaminant Overview</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./OrganicContaminant_Remediation_Configuration_Guide.html"><span>Organic Contaminant Redemption Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./OrganicContaminant_Tracer_Configuration_Guide.html"><span>Organic Contaminant Tracer Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ReachSpecificObservedRunnoff.html"><span>Reach Specific Observed Runnoff</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./SnowDepth_Initialization_Guide.html"><span>Snow Depth Initialization Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./TopoFiles_Output_Summary.html"><span>Topo Files Output Summary </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaParallel_Error_Reports.html"><span>Velma Parallel Error Reports</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaParallel_With_Multiple_Maps.html"><span>Velma Parallel With Multiple Maps </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./WaterDrainDisturbanceModel_Overview.html"><span>Water Drain Disturbance Model</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimulatorCmdLine_Overview.html"><span>Velma Sim Cmd Line Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimulatorAltCmdLine_Overview.html"><span>Velma Sim Alt Cmd Line Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./SurfaceEvaporation_Overview.html"><span>Surface Evaporation Overview</span></a></li>
              <li class="nav-item"> <a class="nav-link" href="./LccmTranslatorUtility_Overview.html"><span>LCCM-to-VELMA Translator Utility</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown"> <a class="nav-link" href="./dev_utils.html"><span>Developer Utils</span></a>
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./AscMapOct_Guide.html"><span>Ascii Map Oct Guide </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./AscRangeMask_Guide.html"><span>Ascii Range Mask Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./MoeVelGenerator_Guide.html"><span>MOEA-to-VELMA Configuration Generator</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./NashSutcliffeCalculator_Guide.html"><span>Tool for Computing Nash-Sutcliffe Coefficients</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./NseQuarts_Guide.html"><span>NseQuarts Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimRunner_QuickRef.html"><span>VelmaSimRunner Quick Reference</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimRunner.html"><span>VelmaSimRunner Full Guide</span></a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
    <div class="modal" id="suggestionModal">
      <div class="modal-content"> <span class="close">&times;</span>
        <h2>Submit a Suggestion </h2>
        <form id="suggestionForm"> 
          <textarea class="suggestion_textbox" id="suggestionText" name="suggestionText" require="True" placeholder="Enter your suggestion here ..."> </textarea>
          <button class="submit_btn" type="submit">Submit</button>
        </form>
      </div>
    </div>
    <div class="main_body container" id="main_body">
      <div class="plus-sign">
        <p>+</p>
      </div>
      <h1>B.10 | Flow Path Modification with the JPDEM Channel Cutter</h1>
      <div class="info blue-light-1">
        <p>Overview <i>(Tutorial B.10 - JPDEM Channel Cutter)</i></p>
        <p>Digital elevation models (DEMs) need to be flat-processed using the JPDEM tool before VELMA can accurately simulate flow paths within a watershed. However, JPDEM's flat-processing procedure cannot account for obscuring landscape features such as bridges or buried streams, leading to potentially large errors in estimating actual flow paths.</p>
        <p>Therefore, JPDEM includes a procedure that allows users to make elevation adjustments (a.k.a. "dredging" or "cutting") to reroute specified channels within a DEM. Performing channel cutting prior to flat-processing a DEM can improve the fidelity of flow paths in the subsequent flat- processed map relative to the actual terrain it represents.</p>
        <p>JPDEM's "channel cutter" can also be used to re-engineer existing DEM flow paths, for example, to support "what if" green infrastructure (GI) and low impact development (LID) simulations. Or, VELMA users might want to explore how rerouting stormwater from established gray infrastructure flow paths (e.g., streets equipped with storm drains) to proposed rain gardens, detention ponds, engineered wetlands, etc.</p>
        <p>This document describes the basics of using JPDEM's channel cutter to accomplish such objectives.</p>
      </div>
      <p>The Channel Cutter mechanism reduces the elevations of specified sequences of cells ("channel cells") relative to their adjacent cells ("bank cells"). The elevation reduction is performed so that the channel cells guaranty a continuous "step down" from the upper most channel cell ("headwater cell") to the edge of the DEM map grid.</p>
      <p>The Channel Cutter mechanism requires a channel guide map that defines the channel cells it should adjust, including a built-in coded sequence representing the order of adjustment to be made on the DEM map data. Producing the channel guide map comprises most of the effort for the overall task of modifying ("dredging") a map's channels (flow paths). Appendix A????? provides instructions for using ArcMap and associated utility tools for establishing a channel guide map and performing the dredging process.</p>
      <p><b>Important Note: </b>JPDEM's "Standard" and "Alternate" flat-processing methods should <u>NOT</u> be used for flat-processing DEMs when the Channel Cutter mechanism is being used. Reason is these two methods both raise and lower cells during flat-processing. The other methods ("Experimental" and "Enhanced Experimental") only raise cell elevations during flat-processing adjustments. Since the Channel Cutter mechanism enforces flow to the edge of the map, these cells are guaranteed correct, therefore are not modified when using the "Experimental" and "Enhanced Experimental"</p>
      <p>methods. That behavior cannot be guaranteed when using the "Standard" and "Alternate" flat-processing methods.</p>
      <h2>Using the Channel Cutter</h2>
      <p>This document assumes that you already have a raw DEM (i.e. a DEM that has <i>not </i>been flat-processed) that you wish to dredge (i.e. adjust channel cell elevations for) and a correctly-formatted stream channel sequential map to guide the channel cutter.</p>
      <h3>Step 1: Load the DEM Map</h3>
      <p>Start JPDEM and load the un-flat-processed DEM file, via the File -&gt; "Load Map File Data" -&gt; "Load as DEM File" menu item:</p><img width="590" height="160" alt="screenshot" title="screenshot" src="public/suppImage_156.jpg">
      <h3>Step 2: Load the Channel/Stream Guide Map</h3>
      <p>Load the sequential guide map via the File -&gt; "Load Stream File Data"</p><img width="588" height="180" alt="screenshot" title="screenshot" src="public/suppImage_157.jpg">
      <p>After the sequential guide (a.k.a. Stream File Data) map has been loaded, JPDEM will display the cell from the guide map in green:</p><img width="591" height="553" alt="screenshot" title="screenshot" src="public/suppImage_158.jpg">
      <p>If you find that you have loaded the wrong channel/stream guide data, click the File -&gt; "Clear Stream File Data", and then "File -&gt; "Load Stream File Data" to load the correct file.</p>
      <h3>Step 3: Run the Channel Cutter</h3>
      <p>Perform the actual channel cutting by clicking the Tools -&gt; "Adjust DEM via Sequential Stream Guide Data" menu item.</p><img width="590" height="137" alt="screenshot" title="screenshot" src="public/suppImage_159.jpg">
      <p>(The Tools -&gt; "Adjust DEM via Binary Stream Guide Data" - is a different, mechanism that is still under development. If you click it by mistake, close JPDEM, then restart it and begin again with Step 1.)</p>
      <p>When you click "Adjust DEM via Sequential Stream Guide Data", the following dialog opens:</p><img width="626" height="371" alt="screenshot" title="screenshot" src="public/suppImage_160.jpg">
      <p>The "WARNING" section provides a condensed overview of the guide map format specified in Appendix A of this document.</p>
      <p>The "Decrement Amount" mentioned at the top of the dialog is the amount that channel cells are lowered relative to their adjacent bank cells. The value is in meters, and is automatically calculated unless you click the "Fixed Decrement Amount" and specify a value.</p>
      <p>Unless you need a very large difference between channel and bank elevations, leave the Fixed Decrement option unchecked, and simply click the OK button at the bottom of the dialog.</p>
      <p>Doing so will start the channel cutter mechanism.</p>
      <p>The following message indicates that the channel cutter has completed its work:</p><img width="589" height="345" alt="screenshot" title="screenshot" src="public/suppImage_161.jpg">
      <p>Click the OK button to dismiss it.</p>
      <p>When the channel cutter encounters an error, it terminates with the following type of message dialog:</p><img width="625" height="129" alt="screenshot" title="screenshot" src="public/suppImage_162.jpg">
      <h3>Step 4: Check the Channel Cutter Runtime Messages</h3>
      <p>As it processes the channels, the cutter echoes a status report for each channel ID it encounters to stdout of the console JPDEM was started from. (Note, if you started JDPEM by double-clicking its application icon, the status report messages are suppressed.)</p>
      <p>Here is an extract from channel cutter output for a single channel's status (the <span>[...] </span>indicate long text lines that were truncated for this document.)</p>
      <pre> <code>Sequenced Channel #14 : 10024 9849 9674 9675 9500 9501 9326 9151 9152 8977 8802 <span>[...]</span></code><code>minDecrement=2.000000000066393E-4 bankDecrement=1.026900000000012 maxDecrement=<span>[...] </span>Channel Cells: 10024 9849 9674 9675 9500 9501 9326 9151 9152 8977 <span>[...]</span></code><code>Channel Cell Elevations: 369.2801 368.8617 368.44329999999997 368.0249 <span>[...]</span></code><code>Problem Channel Cells: -none-</code><code>Bank Cells: 10025 10200 10199 10198 10023 9848 9850 9850 10025 10023 <span>[...]</span></code><code>Bank Cell Elevations: 372.6165 376.9927 373.6152 375.6302 375.5685 375.7058 <span>[...]</span></code><code>Problem Bank Cells: -none-</code></pre>
      <p>Note that the above channel processed cleanly: the "Problem Channel" and "Problem Bank" lines report "-none-". If either of the "Problem" report lines listed cell indices, that would indicate the channel cutter encountered some ambiguity at those cells. Careful review of the guide map data must then be performed: it may be that the sequencing of the channel is incorrect.</p>
      <p>The cutter will fail - and lists to the stdout console - when it encounters one or more duplicate sequence.channel ID values in a single guide map. Here is short example of what the duplicate error message looks like:</p>
      <pre> <code>At 2018-10-05 14:59:02: Starting Sequential Stream Guide Processor ... Cutter depth: Automatic Detection</code><code>Duplicate: iSequence=15 iChannel=9</code><code>Duplicate: iSequence=2 iChannel=2 </code><code>Duplicate: iSequence=141 iChannel=1 </code><code>Duplicate: iSequence=197 iChannel=1</code><code>FAILED: ChanngerCutterEngine.cutChannel HAS EXITED WITH EXCEPTION </code><code>java.lang.RuntimeException: FAIL: There are 4 duplicate sequence-channel values in the stream guide file.</code><code>Reload the DEM file to clear any incomplete channel cutter modifications.</code></pre>
      <h3>Step 5: Flat-Process the Channel-Cut Map</h3>
      <p>You can save the flat-processed channel-cut DEM map immediately after running the cutter, and we recommend you do this, but we also recommend you flat-process the DEM immediately after successfully channel-cutting it. The results of the channel-cutter mechanism are most compatible with the 3 "Experimental …" flat-processing algorithms; choose one of those and run it on the just-cut DEM. After the flat-processor is done, save the resulting map to a file (File -&gt; "Save DEM Data As" -&gt; "ASCII Grid"). You may also use the "Facc Threshold" rendering feature to evaluate how well the guide map's cells correspond to high-flow cells of the flat-processed DEM (see Appendix B for details).</p>
      <h2>Appendix A:</h2>
      <h3>Channel Cutter Sequential Guide Map Format</h3>
      <p>For some watersheds, a VELMA user may desire to increase the processing time required to flat process their area of interest or may need to control the representation of the VELMA simulation flow path.</p>
      <p>Both goals can be met using JPDEM's advanced feature, the Dredger.</p>
      <p>The current state of the dredging tool is beyond "Beta". Though, currently this method is not as user friendly as JPDEM itself. As of VELMA 2.1, the user must use GIS software to prepare spatial data for an intermediate Java-based tool referred to as the Channel Cutter method (a.k.a Dredger), or by Java file referred to as "JpdemStreamDredgePrepper.jar".</p>
      <p>A channel cutter sequential guide map is an ESRI Grid ASCII (.asc) map file with the same dimensions as the DEM file it is intended to overlay. The contents of the file specify a collection of one or more channels, and the sequence of cells within each channel.</p>
      <p>The following cell value details are generated for the user by the JpdemStreamDredgePrepper.jar tool. Understanding the end goal assists with trouble shooting the final stream dredge map provided to JPDEM. Each cell data value within the file must be either:</p>
      <ol>
        <li>The DEM file's nodata_value (usually -9999).
          <ul> 
            <li>Cells with the nodata_value are ignored by the channel cutter mechanism.</li>
          </ul>
        </li>
        <li>A decimal number signifying that cell's stream flow sequence and channel ID numbers.
          <ul> 
            <li>The whole number portion (left side of decimal) of the number is the cell's stream flow sequence number within the channel. First stream cell (stream mouth) is always 1 and each flowing cell is a greater number than touching downstream number. Numbers in the sequence can be skipped.</li>
            <li>The mantissa or cents portion (right side of decimal) of the number is the stream ID value for each channel that cell is a member. The ranking of each stream channel value dictates the hierarchy of dredging. A stream value of 1 has highest priority. Any stream cell of lower priority is dredged first with a higher priority being dredged later. This allows for proper dredging at stream confluences. The stream that terminates at the confluence should be of lower stream value priority, meaning a larger stream number.</li>
          </ul>
        </li>
      </ol>
      <p>The channel cutter mechanism is inelastic and cannot recover from map data errors. In addition to the above, the following requirements must be met:</p>
      <ul> 
        <li>It is an error for the same sequenceID.channelID number value to occur more than once in a single map file.</li>
        <li>A channel's sequence ID values must increase (lowest to highest) from its outlet to its "headwater" cell.</li>
        <li>A channel's outlet cell must either terminate at the edge of the DEM grid, or adjacent to a cell of a different channel.</li>
        <li>A channel (and all connecting channels) may touch the edge of the DEM grid at only one cell location - that is, a channel or network of channels must terminate at a single DEM grid edge cell. A sequential guide map <i>may </i>contain more than one channel that terminates at a DEM grid edge, but every channel or network of channels that terminates at a DEM grid edge cell must be independent (i.e. not connect) to any other channel or network of channels that terminate at a grid edge cell.</li>
      </ul>
      <h3>Preparing the channel cutter sequential guide map using the JPDEM Dredger Prepper Tool</h3>
      <h4>Part 1: Preparation of stream data</h4>
      <ol> 
        <li>Load into ArcMap your raw DEM in the format VELMA will receive, meaning the extent and final cell resolution are already resolved. Note: the extent is an important here, if you change the DEM extent, you must create a new Dredge map matching the new DEM.</li>
        <li>Load the polyline shapefile representing your desired dredging pattern.
          <ol> 
            <li>These data can be existing NHD data or other prepared stream data representations, created from scratch when data does not exist, such as when proposed future flow paths are part of the research.</li>
            <li>Two key points on this polyline shapefile.
              <ol> 
                <li>Each "stream" polyline must be represented as one, meaning in the attribute table an entire stream must contain the same number.</li>
                <li>A "stream" in this polyline shapefile is all the line segments together, and these line segments must all be connected to one network.</li>
                <li>Each "stream" polyline must have its own unique number. Again, a "stream" can be made up of many line segments, but all the segments representing one "stream" must all have the same number, and that number must be unique to only that "stream".</li>
                <li>The "stream" network must have one, and only one, unique "stream" touching the edge of the map.</li>
                <li>The numbers themselves DO NOT have to be in sequence. That is one of several tasks the "JpdemStreamDredgePrepper" accomplishes during initiation.</li>
              </ol>
            </li>
            <li>Clip the "stream" polyline network to match the extent of the raw DEM file.</li>
            <li>Check the attribute table to ensure all line segments have the unique ID matching the "stream" that line segment belongs to.
              <ol> 
                <li>Edit the attribute table as needed to meet this tool requirement. Line segments with missing data will become the terminal end of that "stream" due to the discontinuity. Therefore, the JpdemStreamDredgePrepper tool will stop processing that stream at any point of discontinuity.</li>
              </ol>
            </li>
          </ol>
        </li>
      </ol>
      <p>Convert the "stream" polyline to a raster with matching extent and matching cell resolution. If using ArcMaps Polyline to Raster conversion tool, be sure the attribute field used is the field representing your "streams" unique stream numbers.</p>
      <h3>Running the JpdemStreamDredgePrepper</h3>
      <p>JpdemStreamDredgePrepper is a tool that can be used to simplify the creation of the JPDEM Stream Guide input map. The tool is ran from command line as of 23<span>rd</span> May, 2017. On-going work is being done to streamline this process even further.</p>
      <p>Part 2: Running JpdemStreamDredgePrepper Java Tool</p>
      <p>Steps for preparing to run the JpdemStreamDredgePrepper tool</p>
      <ol> 
        <li>Fill out the properties file using the JpdemStreamDredgePrepper_DefaultProperties.properties file provided.<span>Directory and Burn Modification keys.</span>
          <ol> 
            <li>Provide a project name. The ProjectName must be filled in when the runForModifiedBurns is set to true. The output modified burn file will be named using this key.</li>
            <li>Provide the full file path directory to the location the properties file and input data will be located at.<span>*** The directory file path can contain double backlashes or a single forward slash to separate folders.</span></li>
            <li>stream key is the array generated from the Polyline to Raster conversion. Must be an ASCII. Use ArcMap Raster to ASCII tool to accomplish file conversion.</li>
            <li>startPtX key is the row dimension of the main stream within the &quot;stream&quot; file, where the dredging would begin against the edge of the area of interest.</li>
            <li>startPtY key is the column dimension of the main stream within the &quot;stream&quot; file, where the dredging would begin against the edge of the area of interest.</li>
            <li>writeOutData key is used to control the writing out of intermediate files that are not needed by JPDEM, but could be useful for trouble-shooting when the output &quot;&quot;project&quot;_watershedDredgeMap.asc&quot; file is not as expected.<img width="624" height="263" alt="screenshot" title="screenshot" src="public/suppImage_163.jpg"></li>
          </ol>
        </li>
        <li>Save the Properties file within an accessible folder.</li>
        <li>Launch PowerShell. Other command line methods will work, but PowerShell has the invaluable feature of drag-n-dropping full filepaths.</li>
        <li>Type in PowerShell the following: java -jar</li>
        <li>There is a space between "java" and "-jar", as well as a space after -jar</li>
        <li>Drag-n-drop the "JpdemStreamDredgePrepper.jar" from its full file path location.</li>
        <li>Add a space by clicking the spacebar.</li>
        <li>Drag-n-drop the "JpdemStreamDredgePrepper_DefaultProperties.properties" from its full file path location.
          <ol> 
            <li>Properties file filename can vary, if you renamed it after modifying the variables to fit your study area.</li>
            <li>PowerShell should look something like this now:<img width="624" height="87" alt="screenshot" title="screenshot" src="public/suppImage_164.jpg"></li>
          </ol>
        </li>
        <li>Hit enter! If successful, you will see something like this when the tool is complete:<img width="556" height="110" alt="screenshot" title="screenshot" src="public/suppImage_165.jpg"></li>
      </ol>
      <h4>Outputs:</h4>
      <ol> 
        <li>The tool generates several output files. This is partly due to the tool not being 100% complete, so some files are used during development. The other reason is these files can be useful for trouble shooting problems when the final map does not match what you expected.<img width="443" height="131" alt="screenshot" title="screenshot" src="public/suppImage_166.jpg"></li>
        <li>In the above file structure example:
          <ol> 
            <li><i>projectName</i>_watershedDredgeMap.asc: <span>This is the file one provides to JPDEM. This file is a sorted stream network with the file structure of "sequentialCell.uniqueStream". Example: "1.1" "2.1" "3.1"</span></li>
            <li><i>projectName</i>_cleared_up_streams.asc: <span>The results of an intermediate processing step. Normally only used for code debugging.</span></li>
            <li><i>projectName</i>_streamOrder.asc: <span>The results from the tool sorting the "streams" per cell for the numbers to the right of the decimal.</span></li>
            <li><i>projectName</i>_streamCellSequence.asc: </li>
          </ol>
        </li>
      </ol>
      <p>The results from the tool sorting the values per cell for the numbers to the left of the decimal.</p>
      <h2>Appendix B:</h2>
      <h3>Viewing Channel Information After Flat-Processing</h3>
      <p>Assuming you have loaded a valid DEM and associated guide map, successfully run the channel cutter, and flat-process the channel-cut map, you can view how well the channel guide cells correspond to the DEM's high-flow cells.</p>
      <p>Click the "Facc Threshold" checkbox in JPDEM's toolbar, and enter an appropriate threshold value.</p>
      <p>The threshold image rendering is "guide-map aware", and when guide map information is available, the Facc Threshold colors the DEM map's cells as follows:</p>
      <table>
        <tr> 
          <td>Cell Color</td>
          <td>&gt;= Facc Threshold ?</td>
          <td>Channel Guide Cell ?</td>
        </tr>
        <tr> 
          <td>Grayscale</td>
          <td>NO</td>
          <td>NO</td>
        </tr>
        <tr> 
          <td>Red</td>
          <td>YES</td>
          <td>NO</td>
        </tr>
        <tr> 
          <td>Dark Green</td>
          <td>NO</td>
          <td>YES</td>
        </tr>
        <tr> 
          <td>Yellow/Orange</td>
          <td>YES</td>
          <td>YES</td>
        </tr>
      </table><img width="565" height="530" alt="screenshot" title="screenshot" src="public/suppImage_167.jpg">
    </div>
  </body>
  <footer id="footer">
    <p>VELMA 2.2 DOCUMENTATION</p>
  </footer>
</html>