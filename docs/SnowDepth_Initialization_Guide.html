<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width">
    <meta name="charset" content="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="https://requirejs.org/docs/release/2.3.7/minified/require.js"> </script>
    <script src="js/search.js" type="module"> </script>
    <script src="js/suggestion.js" type="module"> </script>
    <title> </title>
  </head>
  <body class="bg-primary">
    <div class="header blue-base">
      <nav class="navbar blue-base navbar-expand"><a class="navbar-brand" href="/index.html">VELMA 2.2 HOME</a>
        <ul class="navbar-nav no-bullets">
          <li class="nav-item dropdown">VELMA 2.0 Manual
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="/intro.html"><span>I. Intro</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/changes.html"><span>II. Changes from 1.0</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/about.html"><span>III. About</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/input_files.html"><span>IV. Input Files </span></a></li>
              <li class="nav-item"><a class="nav-link" href="/new_sim_config.html"><span>V. Sim Config</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/parameter_config.html"><span>VI. Parameter Config</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">Appendicies
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="/appendix_1.html"><span>Overview of VELMA's Leaf-Stem-Root (LSR) Plant Biomass Submodel</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/appendix_2.html"><span>Initializing a Spatial Data Pool Using an ASCII Grid</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/appendix_3.html"><span>Creating Initial ASCII Grid Chemistry Spatial Data Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/appendix_4.html"><span>Overview of VELMA Simulator Output</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/appendix_5.html"><span>Generating daily temperature and precipitation grids for running VELMA</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/appendix_6.html"><span>Hydrological and Biochemical Model Descriptions</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/appendix_7.html"><span>Creating Flat-Processed DEM Data For The VELMA Simulator</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">Supplemental Info (VELMA 2.1)
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="/supplement-a1.html"><span>Organic Contaminant Modeling Using VELMA</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-a2.html"><span>Configure VELMA for Simulating Contaminant Fate and Transport</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-a3.html"><span>VELMA Contaminant Modeling Demonstration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-a4.html"><span>Adding Stormwater Drains for Urban &amp; Mixed-Use Watershed Applications</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b1.html"><span>Creating Flat-Processed DEM Data for the VELMA Simulator</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b2.html"><span>JPDEM Cell Highlighter</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b3.html"><span>JPDEM Flow Accumulation (Facc) Threshold Display</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b4.html"><span>JPDEM Flow Test Tool</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b5.html"><span>JPDEM Saving Data to Files</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b6.html"><span>JPDEM User-Specified Map Borders</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b7.html"><span>JPDEM User-Specified Border Mask</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b8.html"><span>JPDEM for Viewing Map Differences</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b9.html"><span>JPDEM Sub-Reach Delineations</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-b10.html"><span>Flow Path Modification with the JPDEM Channel Cutter</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-c1.html"><span>VELMA Reach Mapping</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-c2.html"><span>How to Run VELMA in Parallel Mode</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-c3.html"><span>Rationale for Parallel Velma and Reach Segmentation</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d1.html"><span>Acquisition &amp; Generation of VELMA Input Data</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d2.html"><span>Soil Data Mapping and Parameter Initialization</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d3.html"><span>Initialize a Spatial Data Pool Using an Ascii Grid</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d4.html"><span>Create Initial Soil and Plant Chemistry Spatial (ASCII Grid) Data Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d5.html"><span>Create Land-zoning Maps for a VELMA Application</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d6.html"><span>Add Georeferenced Projection Information to VELMA Output ASCII Maps</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d7a.html"><span>Create Multiple-Location Weather Drivers</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d7b.html"><span>Development of Statistical Models Based on Monthly PRISM / Daymet Data</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d8.html"><span>Cell Data Writer Configuration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d9.html"><span>Set Up VELMA biomass Outputs as Inputs to BlueSky</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-d10.html"><span>Default Tidewater Model Configuration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e1.html"><span>Mapping Surface Layer Permeabilities</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e2.html"><span>VELMA Surface Chemistry Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e3.html"><span>Deposition of Surface Chemicals</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e4.html"><span>Implementing Green Roof Applications</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e5.html"><span>Irrigation Disturbance</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e6.html"><span>Groundwater Storage Mechanism</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/supplement-e7.html"><span>Spatial Data Writer Key Words for Generating ASCII VELMA Outputs for Data Visualization</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown"> <a class="nav-link" href="/dev_info.html"><span>Developer Info</span></a>
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="/GetVelma_ForEclipse.html"><span>Clone Github to Local Machine</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/CellSpecificBurnDisturbance_Configuration_Guide.html"><span>Cell Specific Burn Disturbance Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/Configuration_Checker_Guide.html"><span>Configuration Checker Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/DefaultSedimentModel_Configuration_Guide.html"><span>Default Sediment Model Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/Sediment_Output_Data_Summary.html"><span>Sediment Output Data Summary</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/ForestBurnLsrDisturbanceModel_Overview.html"><span>Forest Burn LSR Disturbance Model</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/JPDEM_ReachMapping_Demonstration.html"><span>JPDEM Reaching Mapping Demo</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/MinMaxAirT_WeatherDrivers.html"><span>Min Max Air Temp Weather Drivers</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/ModifySpatialDataByMap_Guide.html"><span>Modify Spatial Data by Map Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/ObsRunoff_and_NaNs.html"><span>OBS Runnoff and NaNs</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Overview.html"><span>Organic Contaminant Overview</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Remediation_Configuration_Guide.html"><span>Organic Contaminant Redemption Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/OrganicContaminant_Tracer_Configuration_Guide.html"><span>Organic Contaminant Tracter Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/ReachSpecificObservedRunnoff.html"><span>Reach Specific Observed Runnoff</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/SnowDepth_Initialization_Guide.html"><span>Snow Depth Initialization Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/TopoFiles_Output_Summary.html"><span>Topo Files Output Summary </span></a></li>
              <li class="nav-item"><a class="nav-link" href="/VelmaParallel_Error_Reports.html"><span>Velma Parallel Error Reports</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/VelmaParallel_With_Multiple_Maps.html"><span>Velma Parallel With Multiple Maps </span></a></li>
              <li class="nav-item"><a class="nav-link" href="/WaterDrainDisturbanceModel_Overview.html"><span>Water Drain Disturbance Model</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/VelmaSimulatorCmdLine_Overview.html"><span>Velma Sim Cmd Line Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/VelmaSimulatorAltCmdLine_Overview.html"><span>Velma Sim Alt Cmd Line Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/SurfaceEvaporation_Overview.html"><span>Surface Evaporation Overview</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown"> <a class="nav-link" href="/dev_utils.html"><span>Developer Utils</span></a>
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="/AscMapOct_Guide.html"><span>Ascii Map Oct Guide </span></a></li>
              <li class="nav-item"><a class="nav-link" href="/AscRangeMask_Guide.html"><span>Ascii Range Mask Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/MoeVelGenerator_Guide.html"><span>MOEA-to-VELMA Configuration Generator</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/NashSutcliffeCalculator_Guide.html"><span>Tool for Computing Nash-Sutcliffe Coefficients</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/NseQuarts_Guide.html"><span>NseQuarts Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/VelmaSimRunner_QuickRef.html"><span>VelmaSimRunner Quick Reference</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/VelmaSimRunner.html"><span>VelmaSimRunner Full Guide</span></a></li>
            </ul>
          </li>
        </ul>
      </nav>
      <div class="search-bar">
        <input id="search" type="search" name="search" placeholder="Search VELMA Docs" autocomplete="off" list="search-suggestions">
      </div>
    </div>
    <div class="modal" id="suggestionModal">
      <div class="modal-content"> <span class="close">&times;</span>
        <h2>Submit a Suggestion </h2>
        <form id="suggestionForm"> 
          <textarea class="suggestion_textbox" id="suggestionText" name="suggestionText" require="True" placeholder="Enter your suggestion here ..."> </textarea>
          <button class="submit_btn" type="submit">Submit</button>
        </form>
      </div>
    </div>
    <div class="main_body container" id="main_body">
      <div class="plus-sign">
        <p>+</p>
      </div>
      <h1>Spatially-Explicit Snow Depth Initialization<br> via a<br> ModifySpatialDataByMapDisturbanceModel Parameterization</h1>
      <h2>Overview</h2>
      <p>Spatially-explicit weather models may require spatially-explicit, varying amounts of "snow on the ground" (i.e. "SnowDepth") at simulation start up.<br> You can specify spatially-explicit snow depth amounts in a Grid ASCII (.asc) map file, and apply those amounts to a VELMA simulation via a Modify-By-Map (<code>ModifySpatialDataByMapDisturbanceModel</code>) parameterization that references the .asc map.</p>
      <h2>Requirements</h2>
      <ul>
        <li>One Grid ASCII (.asc) map file containing snow depth amounts.</li>
        <li>One Modify-By-Map parameterization specifying the snow depth .asc map file as source, and the <code>SnowDepth</code> spatial data pool as target.</li>
        <li>The .asc map file must have the same dimensions as the simulation's specified DEM Grid file.</li>
        <li>The .asc map file's values should be zero or positive, and are assumed to match the <code>SnowDepth</code> target pool's units (i.e. mm).</li>
      </ul>
      <p>Add a <code>ModifySpatialDataByMapDisturbanceModel</code> parameterization to your VELMA simulation configuration.<br> Refer to the <a>Modifying a VELMA SpatialData Pool Using Grid ASCII Map Data</a> guide for details.<br> The <code>ModifySpatialDataByMapDisturbanceModel</code> is the <em>ONLY</em> item parameterization that can be used to initialize <code>SnowDepth</code>. Other spatially-explicit data (e.g. <code>BIOMASS_LEAF_N</code>) can use either <code>ModifySpatialDataByMapDisturbanceModel</code> or <code>SetSpatialDataByMapDisturbanceModel</code> parameterizations for initialization purposes (although the latter is legacy and deprecated), but <code>SnowDepth</code> cannot.</p>
      <p>Once the parameterization is added, confirm that the following parameters are set to these values:<br> <em>NOTE: The Item name "Initialize_SnowDepth" is suggested, and used below, but can actually be whatever you choose.</em></p>
      <table>
        <thead>
          <tr>
            <th>Group</th>
            <th>Item</th>
            <th>Parameter</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>modelClass</td>
            <td><code>ModifySpatialDataByMapDisturbanceModel</code></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>occursAtStepStart</td>
            <td><code>true</code></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>setCellOutcome</td>
            <td><code>REPLACE</code></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>setMapValueMode</td>
            <td><code>VALUE</code></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>spatialDataLayer</td>
            <td><code>1</code></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>spatialDataName</td>
            <td><code>SnowDepth</code></td>
          </tr>
        </tbody>
      </table>
      <p>Set the item's remaining parameters based on when you want the initialization to occur, and the name (possibly including path info) of the Grid ASCII (.asc) map file containing intial snow depth values.</p>
      <table>
        <thead>
          <tr>
            <th>Group</th>
            <th>Item</th>
            <th>Parameter</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>initializeActiveJdays</td>
            <td><em>Set to the Julian day when snow depth initialization should occur (typically the first day of the year, i.e. 1).</em></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>initializeActiveLoops</td>
            <td><em>Set to the simulation loop when snow depth initialization should occur (typically the first simulation loop, i.e. 1).</em></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>initializeActiveYears</td>
            <td><em>Set to the simulation year when snow depth initialization should occur (typically the first year of the simulation).</em></td>
          </tr>
          <tr>
            <td>disturbance</td>
            <td>Initialize_SnowDepth</td>
            <td>spatialDataFileFullName</td>
            <td><em>Set to the name (possibly including path info) of the snow depth values .asc map file.</em></td>
          </tr>
        </tbody>
      </table>
      <h2>Weather Model Considerations</h2>
      <p>Spatially-explicit snow depths only make sense for spatially-explicit weather models.<br> If your simulation configuration's weather model isn't fully spatially-explicit, the VELMA simulator tries to do something reasonable, but the results may be unintuitive.</p>
      <table>
        <thead>
          <tr>
            <th>Weather Model</th>
            <th>Spatially-Explicit?</th>
            <th>What Happens for SnowDepth initialization</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Default Weather Model</td>
            <td>NO</td>
            <td>The SnowDepth for <em>every</em> cell is set to the value specified at the outlet cell in the <code>spatialDataFileFullName</code> .asc map file.</td>
          </tr>
          <tr>
            <td>Multiple-Location Weather Model</td>
            <td>Yes: partially</td>
            <td>All cell in the polygonal region of a given weather station location are set to the value specified at that weather station's location in the <code>spatialDataFileFullName</code> .asc map.</td>
          </tr>
          <tr>
            <td>Multiple-Weighted-Location Weather Model</td>
            <td>Yes: fully</td>
            <td>All cells are set to the snow depth values in the <code>spatialDataFileFullName</code> .asc map.</td>
          </tr>
          <tr>
            <td>Spatial Weather Model</td>
            <td>Yes: fully</td>
            <td>All cells are set to the snow depth values in the <code>spatialDataFileFullName</code> .asc map.</td>
          </tr>
        </tbody>
      </table>
      <h3>Special Considerations for the Spatial Weather Model</h3>
      <p>The Spatial Weather Model (<code>SpatialWeatherModel</code>) has a legacy parameter, <code>initialSnowDepthFileName</code>, that allows spatially-explicit snow depth initialization.</p>
      <p>That legacy parameter still works, but it is distinct and separate from initializing snow depth via a Modify-By-Map parameterization. Setting a Spatial Weather Model's <code>initialSnowDepthFileName</code> <em>and</em> configuring a Modify-By-Map parameterization to both initialize snow depth values should not be attempted, because the two separate mechanisms may interfere with each other.</p>
      <p>When you use a Modify-By-Map parameterization to initialize snow depth values for a Spatial Weather Model, set the Spatial Weather Model's <code>initialSnowDepthFileName</code> parameter to be blank.</p>
      <p>Although the Spatial Weather Model's <code>initialSnowDepthFileName</code> uses a different mechanism than Modify-By-Map parameterizations do, it uses the same Grid .asc map format. You can "update" a legacy VELMA configuration with a Spatial Weather Model that has <code>initialSnowDepthFileName</code> set by:</p>
      <ol>
        <li>Adding a Modify-By-Map parameterization to your VELMA configuration, with parameters configured as listed above.</li>
        <li>Setting its <code>spatialDataFileFullName</code> value to the Spatial Weather Model's <code>initialSnowDepthFileName</code> value.</li>
        <li>Setting the Spatial Weather Model's <code>initialSnowDepthFileName</code> value to blank.</li>
      </ol>
    </div>
  </body>
  <footer id="footer">
    <p>VELMA 2.2 DOCUMENTATION</p>
  </footer>
</html>