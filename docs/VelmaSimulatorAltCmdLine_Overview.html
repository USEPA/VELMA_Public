<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width">
    <meta name="charset" content="utf-8">
    <link rel="stylesheet" type="text/css" href="public/css/style.css">
    <script src="https://requirejs.org/docs/release/2.3.7/minified/require.js"> </script>
    <script src="public/js/search.js" type="module"> </script>
    <script src="public/js/suggestion.js" type="module"> </script>
    <title> </title>
  </head>
  <body class="bg-primary">
    <div class="header blue-base">
      <nav class="navbar blue-base navbar-expand"><a class="navbar-brand" href="./index.html">VELMA 2.2 HOME</a>
        <ul class="navbar-nav no-bullets">
          <li class="nav-item dropdown">VELMA 2.0 Manual
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./intro.html"><span>I. Intro</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./changes.html"><span>II. Changes from 1.0</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./about.html"><span>III. About</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./input_files.html"><span>IV. Input Files </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./new_sim_config.html"><span>V. Sim Config</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./parameter_config.html"><span>VI. Parameter Config</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">Appendicies
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./appendix_1.html"><span>Overview of VELMA's Leaf-Stem-Root (LSR) Plant Biomass Submodel</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_2.html"><span>Initializing a Spatial Data Pool Using an ASCII Grid</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_3.html"><span>Creating Initial ASCII Grid Chemistry Spatial Data Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_4.html"><span>Overview of VELMA Simulator Output</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_5.html"><span>Generating daily temperature and precipitation grids for running VELMA</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_6.html"><span>Hydrological and Biochemical Model Descriptions</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./appendix_7.html"><span>Creating Flat-Processed DEM Data For The VELMA Simulator</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">Supplemental Info (VELMA 2.1)
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./supplement-a1.html"><span>Organic Contaminant Modeling Using VELMA</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-a2.html"><span>Configure VELMA for Simulating Contaminant Fate and Transport</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-a3.html"><span>VELMA Contaminant Modeling Demonstration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-a4.html"><span>Adding Stormwater Drains for Urban &amp; Mixed-Use Watershed Applications</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b1.html"><span>Creating Flat-Processed DEM Data for the VELMA Simulator</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b2.html"><span>JPDEM Cell Highlighter</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b3.html"><span>JPDEM Flow Accumulation (Facc) Threshold Display</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b4.html"><span>JPDEM Flow Test Tool</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b5.html"><span>JPDEM Saving Data to Files</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b6.html"><span>JPDEM User-Specified Map Borders</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b7.html"><span>JPDEM User-Specified Border Mask</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b8.html"><span>JPDEM for Viewing Map Differences</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b9.html"><span>JPDEM Sub-Reach Delineations</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-b10.html"><span>Flow Path Modification with the JPDEM Channel Cutter</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-c1.html"><span>VELMA Reach Mapping</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-c2.html"><span>How to Run VELMA in Parallel Mode</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-c3.html"><span>Rationale for Parallel Velma and Reach Segmentation</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d1.html"><span>Acquisition &amp; Generation of VELMA Input Data</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d2.html"><span>Soil Data Mapping and Parameter Initialization</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d3.html"><span>Initialize a Spatial Data Pool Using an Ascii Grid</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d4.html"><span>Create Initial Soil and Plant Chemistry Spatial (ASCII Grid) Data Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d5.html"><span>Create Land-zoning Maps for a VELMA Application</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d6.html"><span>Add Georeferenced Projection Information to VELMA Output ASCII Maps</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d7a.html"><span>Create Multiple-Location Weather Drivers</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d7b.html"><span>Development of Statistical Models Based on Monthly PRISM / Daymet Data</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d8.html"><span>Cell Data Writer Configuration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d9.html"><span>Set Up VELMA biomass Outputs as Inputs to BlueSky</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-d10.html"><span>Default Tidewater Model Configuration</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e1.html"><span>Mapping Surface Layer Permeabilities</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e2.html"><span>VELMA Surface Chemistry Pools</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e3.html"><span>Deposition of Surface Chemicals</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e4.html"><span>Implementing Green Roof Applications</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e5.html"><span>Irrigation Disturbance</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e6.html"><span>Groundwater Storage Mechanism</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./supplement-e7.html"><span>Spatial Data Writer Key Words for Generating ASCII VELMA Outputs for Data Visualization</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown"> <a class="nav-link" href="./dev_info.html"><span>Developer Info</span></a>
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./GetVelma_ForEclipse.html"><span>Clone Github to Local Machine</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./CellSpecificBurnDisturbance_Configuration_Guide.html"><span>Cell Specific Burn Disturbance Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./Configuration_Checker_Guide.html"><span>Configuration Checker Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./DefaultSedimentModel_Configuration_Guide.html"><span>Default Sediment Model Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./Sediment_Output_Data_Summary.html"><span>Sediment Output Data Summary</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ForestBurnLsrDisturbanceModel_Overview.html"><span>Forest Burn LSR Disturbance Model</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./JPDEM_ReachMapping_Demonstration.html"><span>JPDEM Reaching Mapping Demo</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./MinMaxAirT_WeatherDrivers.html"><span>Min Max Air Temp Weather Drivers</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ModifySpatialDataByMap_Guide.html"><span>Modify Spatial Data by Map Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ObsRunoff_and_NaNs.html"><span>OBS Runnoff and NaNs</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./OrganicContaminant_Overview.html"><span>Organic Contaminant Overview</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./OrganicContaminant_Remediation_Configuration_Guide.html"><span>Organic Contaminant Redemption Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./OrganicContaminant_Tracer_Configuration_Guide.html"><span>Organic Contaminant Tracer Config Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./ReachSpecificObservedRunnoff.html"><span>Reach Specific Observed Runnoff</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./SnowDepth_Initialization_Guide.html"><span>Snow Depth Initialization Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./TopoFiles_Output_Summary.html"><span>Topo Files Output Summary </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaParallel_Error_Reports.html"><span>Velma Parallel Error Reports</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaParallel_With_Multiple_Maps.html"><span>Velma Parallel With Multiple Maps </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./WaterDrainDisturbanceModel_Overview.html"><span>Water Drain Disturbance Model</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimulatorCmdLine_Overview.html"><span>Velma Sim Cmd Line Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimulatorAltCmdLine_Overview.html"><span>Velma Sim Alt Cmd Line Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./SurfaceEvaporation_Overview.html"><span>Surface Evaporation Overview</span></a></li>
              <li class="nav-item"> <a class="nav-link" href="./LccmTranslatorUtility_Overview.html"><span>LCCM-to-VELMA Translator Utility</span></a></li>
              <li class="nav-item"> <a class="nav-link" href="./VelmaParallel_Piecewise_Configs.html"><span>Velma Parallel Piecewise Configuration</span></a></li>
              <li class="nav-item"> <a class="nav-link" href="./IrrigationDisturbance_Model_Overview.html"><span>Irrigation Disturbance Model Overview</span></a></li>
            </ul>
          </li>
          <li class="nav-item dropdown"> <a class="nav-link" href="./dev_utils.html"><span>Developer Utils</span></a>
            <ul class="nav-dropdown blue-light">
              <li class="nav-item"><a class="nav-link" href="./AscMapOct_Guide.html"><span>Ascii Map Oct Guide </span></a></li>
              <li class="nav-item"><a class="nav-link" href="./AscRangeMask_Guide.html"><span>Ascii Range Mask Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./MoeVelGenerator_Guide.html"><span>MOEA-to-VELMA Configuration Generator</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./NashSutcliffeCalculator_Guide.html"><span>Tool for Computing Nash-Sutcliffe Coefficients</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./NseQuarts_Guide.html"><span>NseQuarts Guide</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimRunner_QuickRef.html"><span>VelmaSimRunner Quick Reference</span></a></li>
              <li class="nav-item"><a class="nav-link" href="./VelmaSimRunner.html"><span>VelmaSimRunner Full Guide</span></a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
    <div class="modal" id="suggestionModal">
      <div class="modal-content"> <span class="close">&times;</span>
        <h2>Submit a Suggestion </h2>
        <form id="suggestionForm"> 
          <textarea class="suggestion_textbox" id="suggestionText" name="suggestionText" require="True" placeholder="Enter your suggestion here ..."> </textarea>
          <button class="submit_btn" type="submit">Submit</button>
        </form>
      </div>
    </div>
    <div class="main_body container" id="main_body">
      <div class="plus-sign">
        <p>+</p>
      </div>
      <h1>Using VELMA Alt Command Line</h1>
      <h2>Overview</h2>
      <p>The VelmaSimulator<strong>Alt</strong>CmdLine ("VelmaAlt") tool is a specialized version of VelmaSimulatorCmdLine ("VelmaSim").<br> Like VelmaSim, VelmaAlt allows you to run a VELMA simulation configuration directly from a command-line, without using VELMA's JVelma GUI environment ("VelmaGUI").<br> <em>Unlike</em> VelmaSim, VelmaAlt requires specification of the simulation configuration's watershed outlet on the command line.</p>
      <p>VelmaAlt ignores the watershed outlet specified within the simulation configuration .xml file, and uses whatever location is specified on the command line as the watershed outlet for the simulation run. VelmaAlt does <em>not</em> check the <a>validity</a> of the specified watershed outlet <em>in any way</em>. It is quite easy to "break" a VelmaAlt run by providing it with a watershed outlet location that is invalid relative to the simulation configuration data in the .xml file. Given this, it may be unclear why you would ever want to use VelmaAlt instead of VelmaSim.</p>
      <p>In fact, VelmaAlt was not originally created for VELMA users. VelmaAlt was created to be the "back-end" tool used by VelmaParallelCmdLine ("VelmaPar"). When you start a simulation run with VelmaPar, you are actually starting a top-level manager (VelmaPar itself) that runs sub-reaches by calling VelmaAlt for each sub-reach. In order to run a sub-reach, VelmaPar tells VelmaAlt the simulation configuration .xml file to use, plus the watershed outlet for that sub-reach.</p>
      <p>However, there are cases when VelmaAlt is exactly the right tool to use to run a VELMA simulation.</p>
      <p>The most important (and by far most common) case is when you are actually trying to run a simulation with VelmaPar, but one or more of your sub-reaches fails to run correctly. You can use the VelmaPar results <a>log file information</a> to determine which sub-reach failed first, and re-run that (and only that) specific sub-reach using VelmaAlt. This allows you to focus on a single simulation run and the simulation configuration parameters that affect that specific sub-reach. In many cases, this focus can in turn lead to a clearer idea of what went wrong for the sub-reach, and how to correct it.</p>
      <p>A second use of VelmaAlt is for running multi-map and (possibly) multi-scale VELMA simulations, however, multi-map, multi-scale simulation runs are considerably more complicated to configure than "standard" single-map, single-scale runs, and are not covered in this document. To add to their complexity, it is possible to use either VelmaAlt <em>or</em> VelmaPar to initiate a multi-map, multi-scale VELMA simulation run, but the configuration requirements are different for VelmaAlt and VelmaPar.</p>
      <h2>Quickstart Guide</h2>
      <h3>Requirements</h3>
      <p>All of the <a>requirements</a> for VelmaSim apply for VelmaAlt, plus the additional requirement of providing a valid watershed outlet location on the VelmaAlt command line.</p>
      <p>Just like VelmaSim, it is possible to run VelmaAlt from a variety of consoles and operating systems, but we focus on Windows 10 and PowerShell in this document, because it is by far the most common combination VELMA is run under.</p>
      <h3>Running a Simulation via VelmaSimulatorAltCmdLine in PowerShell</h3>
      <p>The VelmaSim Quickstart Guide's istructions for <a>opening a PowerShell console</a> and for <a>verifying the JRE</a> apply without any changes to VelmaAlt.</p>
      <h4><strong>Start a Simulation With VelmaSimulatorAltCmdLine</strong></h4>
      <p>A typical VelmaAlt command line looks quite similar VelmaSim's, apart from the aformentioned watershed outlet location.</p>
      <pre><code>java -Xmx<mem> -cp <jarfullpath>\JVelma.jar gov.epa.velmasimulator.VelmaSimulatorAltCmdLine <xmlfullpath>\<simconfig.xml> <ioutlet></code></pre>
      <p>The items above must appear as shown, in the order shown:</p>
      <ul>
        <li><code>java</code> invokes the Java JRE installed on your computer</li>
        <li><code>-Xmx<mem></code> allocates <code><mem></code> amount of runtime memory to run the simulation.</li>
        <li><code>-cp</code> identifies the item that follows it to the Java JRE as the file containing Java code to run.</li>
        <li><code><jarfullpath>\JVelma.jar</code> represents the fully-qualified path and name of your JVelma.jar (which contains VelmaAlt).</li>
        <li><code>gov.epa.velmasimulator.VelmaSimulatorAltCmdLine</code> is the fully-qualified Java program name of VelmaAlt.</li>
        <li><code><xmlfullpath>\<simconfig.xml></code> represents the fully-qualified path and name of the simulation configuration .xml file to run.</li>
        <li><code><ioutlet></code> is the integer value representing the linear-index location of the outlet cell of the watershed to run.</li>
      </ul>
      <p>Here is an example of an actual command line in the format outlined above:</p>
      <pre><code>PS C:\Users\meep> java -Xmx1g -cp C:\Users\meep\VELMA\JVelma.jar gov.epa.velmasimulator.VelmaSimulatorAltCmdLine C:Users\meep\VelmaConfigs\OR_BlueRiver_ws10.xml 1217</code></pre>
      <p>Here is how the items in the specific example command line map back to the general command line format:</p>
      <ul>
        <li><code>PS C:\Users\meep></code> is a typical PowerShell command prompt (yours may look different).</li>
        <li>The <code><mem></code> specified is <code>1g</code>: <code>-Xmx1g</code> means "allocate 1 Gigabyte of RAM for this simulation run".</li>
        <li>The fully-qualified JVelma.jar location (<code><jarfullpath>\JVelma.jar</code>) is: <code>C:\Users\meep\VELMA\JVelma.jar</code></li>
        <li>The fully-qualified simulation configuration .xml file (<code><xmlfullpath>\<simconfig.xml></code>) is: <code>C:Users\meep\VelmaConfigs\OR_BlueRiver_ws10.xml</code></li>
        <li>The watershed outlet (<code><ioutlet></code>) is: <code>1217</code></li>
      </ul>
      <p>All other items are unchanged, and appear exactly as they are specified in the general command line format.</p>
      <p>Once you have typed a command line in the format above into your PowerShell console, press the <code>Enter</code> key to start the simulation running.</p>
      <p>Runtime logging statements will appear in the console window.</p>
      <h4><strong>Providing a Valid Outlet</strong></h4>
      <p>Generally, a "valid" outlet for VELMA is any linear-index cell location within the bounds of the specfied DEM grid that delineates to a watershed containing <em>at least</em> 1 channel and 1 non-channel cell.</p>
      <p>However, VelmaAlt's requirements for a "valid outlet" may be stricter, depending upon your simulation configuration.</p>
      <p>If your simulation configuration's <code>enableReachMapping</code> parameter value is set to <code>MULTI_MODE</code>, then the only "valid outlets" for the VelmaAlt command line are those specified for the <code>initialReachOutlets</code> parameter.<br> Additionally, amongst the <code>initialReachOutlets</code> values, if you specify an outlet that depends on other outlets, VelmaAlt assumes all the sub-reaches that your specified outlet depends on have already been run (either by other calls to VelmaAlt or by VelmaPar), and their results are available in the same <a>results location</a> specified for the VelmaAlt run you're starting.<br> If <em>any</em> of the above details are not true, VelmaAlt will fail to run correctly.</p>
      <p>Suppose the following parameter values exist in your simulation configuration .xml file:</p>
      <pre><code>[ . . . ]
calibration/VelmaInputs.properties/run_index, OR_ws1_30m
/calibration/VelmaInputs.properties/enableReachMapping, MULTI_MODE
/calibration/VelmaInputs.properties/initialReachOutlets, 533 1282 1217 1424
/calibration/VelmaInputs.properties/initializeOutputDataLocationRoot, C:\Users\meep\Velma_Results
[ . . . ]</code></pre>
      <p>Reach outlet 1217 depends on data from reach outlet 1424 (note: that <em>cannot</em> be inferred from their <code>initialReachOutlets</code> ordering). Specifying <code>1217</code> as the command-line outlet for a VelmaAlt run is "valid", but at run time VelmaAlt will look for completed results for reach 1424 (because 1217 depends upon it) in directory C:\Users\meep\Velma_Results\OR_ws1_30m. If it fails to find results for <code>1424</code>, outlet <code>1217</code> is still "invalid", even though it would be valid otherwise.</p>
      <p>In contrast, when your simulation configuration's <code>enableReachMapping</code> parameter value is set to <code>SOLO_MODE</code>, only the general validity requirements apply. The specified outlet can be any location within the DEM grid that meets the watershed-delineation cell/type counts.</p>
      <p>In summary:</p>
      <p>Validity requirements when <code>enableReachMapping</code> = <code>MULTI_MODE</code>:</p>
      <ul>
        <li>Outlet must be within the DEM</li>
        <li>Watershed delineated by the outlet must have <em>at least</em> 1 channel cell and 1 non-channel cell.</li>
        <li>Outlet must be listed in <code>initialReachOutlets</code></li>
        <li>Outlet must be for an independent reach, <em>or</em> results data for all contributing reaches must be available in results location.</li>
      </ul>
      <p>Validity requirements when <code>enableReachMapping</code> = <code>SOLO_MODE</code>:</p>
      <ul>
        <li>Outlet must be within the DEM</li>
        <li>Watershed delineated by the outlet must have <em>at least</em> 1 channel cell and 1 non-channel cell.</li>
      </ul>
      <h4><strong>Watershed Delineation Area</strong></h4>
      <p>Like outlet validity requirements, the watershed area that VelmaAlt delineates for the outlet specified on the command line depends upon the simulation configuration's <code>enableReachMapping</code> parameter value.</p>
      <p>When <code>enableReachMapping</code> = <code>MULTI_MODE</code>, VelmaAlt treats the specified outlet as a sub-reach of a larger watershed. The other outlets specified for <code>initialReachOutlets</code> are taken into account. If any of them are contributors to the specified outlet, their watershed area is not included in the specified outlet's watershed area.</p>
      <p>When <code>enableReachMapping</code> = <code>SOLO_MODE</code>, VelmaAlt treats the specified outlet as a stand-alone watershed and delineates it as if it was being run with VelmaSim. Other outlets specified for <code>initialReachOutlets</code> that might serve as contributors are ignored, the area delineated is based solely upon the command-line outlet and the topology of the DEM grid.</p>
      <h4><strong>Locating Results Data</strong></h4>
      <p>Because VelmaAlt was created as a sub-tool for VelmaPar, it shares VelmaPar's "mindset" regarding where to place simulation results data files.</p>
      <p>When you run VelmaSim, simulation results are placed under the directory specified by the <code>initializeOutputDataLocationRoot</code> parameter value, in a subdirectoy named by the <code>run_index</code> parameter value.</p>
      <pre><code>VelnmSim results location = <`initializeOutputDataLocationRoot`>\<`run_index`></code></pre>
      <p>When you run VelmPar, the directory specified by the <code>initializeOutputDataLocationRoot</code> + the subdirectoy named by the <code>run_index</code> parameter value is considered a "root" results directory and contains subdirectories of its own, each containing the results for one of the sub-reach outlets specified by the <code>initialReachOutlets</code> parameter's value. Each outlet-specific results subdirectory name starts with <code>Results_</code> and end with an outlet cell-location index number.</p>
      <pre><code>VelmaPar (and VelmaAlt) results location = <`initializeOutputDataLocationRoot`>\<`run_index`>\Results_<`outlet`>
 Where: there is a .\Results_<`outlet`> dir for each `outlet` specified in `initialReachOutlets`.</code></pre>
      <p>For example, Given a simulation configuration .xml file with these parameter values:</p>
      <pre><code>[ . . . ]
calibration/VelmaInputs.properties/run_index, OR_ws1_30m
/calibration/VelmaInputs.properties/outx, 5			
/calibration/VelmaInputs.properties/outy, 8
/calibration/VelmaInputs.properties/enableReachMapping, MULTI_MODE
/calibration/VelmaInputs.properties/initialReachOutlets, 533 1282 1217 1424
/calibration/VelmaInputs.properties/initializeOutputDataLocationRoot, C:\Users\meep\Velma_Results
[ . . . ]</code></pre>
      <p>VelmaSim will place simulation results under the directory:</p>
      <pre><code>C:\Users\meep\Velma_Results\OR_ws1_30m  </code></pre>
      <p>However, for the same simulation configuration, VelmaPar places simulation results under the directories:</p>
      <pre><code>C:\Users\meep\Velma_Results\OR_ws1_30m\Results_533  
C:\Users\meep\Velma_Results\OR_ws1_30m\Results_1282
C:\Users\meep\Velma_Results\OR_ws1_30m\Results_1217
C:\Users\meep\Velma_Results\OR_ws1_30m\Results_1424</code></pre>
      <p>Regardless of how <code>enableReachMapping</code> is set, VelmaAlt <em>always</em> reports results using VelmPar's directory layout.<br> Suppose the simulation configuration .xml file had these parameter values:</p>
      <pre><code>[ . . . ]
calibration/VelmaInputs.properties/run_index, OR_ws1_30m
/calibration/VelmaInputs.properties/outx, 5			
/calibration/VelmaInputs.properties/outy, 8
/calibration/VelmaInputs.properties/enableReachMapping, SOLO_MODE
/calibration/VelmaInputs.properties/initialReachOutlets, 533
/calibration/VelmaInputs.properties/initializeOutputDataLocationRoot, C:\Users\meep\Velma_Results
[ . . . ]</code></pre>
      <p>Calling VelmaAlt for this simulation configuration (with <code>533</code> on the command line) will place simualtion results in:</p>
      <pre><code>C:\Users\meep\Velma_Results\OR_ws1_30m\Results_533</code></pre>
      <p>even though this is a <code>SOLO_MODE</code> run with no other outlets spedified for <code>initialReachOutlets</code>.</p>
      <p>VelmaAlt results reporting behavior differs from VelmaPar in one important way.</p>
      <p>When VelmaPar is (re-)run for a pre-existing results location, it will remove partial results and report new results in the existing directory.</p>
      <p>When VelmaAlt is (re-)run for a pre-existing results location, it will leave the existing results as-is, and create a new "<code>_<n></code>"-suffixed results directory instead.<br> Using the last VelmaAlt example above, if VelmaAlt is re-run twice after the initial run, the 3 results will be reported in 3 separate directories, like this:</p>
      <pre><code>C:\Users\meep\Velma_Results\OR_ws1_30m\Results_533
C:\Users\meep\Velma_Results\OR_ws1_30m\Results_533_0
C:\Users\meep\Velma_Results\OR_ws1_30m\Results_533_1</code></pre>
      <h2>Usage Message and Command Line Options</h2>
      <p>When you run VelmaAlt without specifying a VELMA simulation configuration .xml file, it displays a usage message to the console.<br> The message provides the VELMA version, reminds you that a VELMA simulation configuration .xml file is required, and lists optional command-line arguments that are available.</p>
      <p>Here is an example:</p>
      <pre><code>java -Xmx1g -cp C:\Users\meep\VELMA\JVelma.jar gov.epa.velmasimulator.VelmaSimulatorAltCmdLine
VELMA_2.1.0.39
Usage: VelmaSimulatorAltCmdLine configurationXmlFileFullName iOutlet_to_run [--kv="key,val"]
  or: VelmaSimulatorAltCmdLine configurationXmlFileFullName relocationFileFullName iOutlet_to_run [--kv="key,val"]
Where:
 
Required arguments are:
 
  configurationXmlFileFullName
    The fully-qualified path and name of a valid VELMA simulation configuration (.xml) file.
    Exactly ONE simulation configuration file fullName must appear in the command line.
 
  iOutlet_to_run
    The linear index of the reach outlet cell for this simulation run.
    The cell index must lie within watershed delineated in the configurationXmlFileFullName file,
    but it does not have to be the same value as the configurationXmlFileFullName file outlet.,
 
Optional arguments are:
 
  relocationFileFullName
    The fully-qualified path and name of a valid VELMA simulation relocation (.csv) file.
    If present, only ONE relocation file fullName may appear in the command line.
 
  --kv="key,val"
    key is the full (/group/item/name) text of a VELMA Simulation Configuration parameter.
    val is the value to set for that key.
  Multiple --kv arguments may occur in the command line.
  No two --kv arguments may specify the same key
  The --kv pairs are set or added to the Simulation Configuration at simulator initialization.
  (The original fullName_simulationConfiguration.xml file is NOT modified)</code></pre>
      <h3>Command Line Options</h3>
      <h4><strong>The Optional <code>relocationFileFullName</code></strong></h4>
      <p>VelmaAlt allows an optional <code>relocationFileFullName</code> on the command line. The relocation file contains additional configuration information required for running multi-map, multi-scale simulations. As mentioned previously, these are beyond the scope of this document.</p>
      <p>Be aware, however, that when a relocation file <em>is</em> specified, it does <em>not</em> have a double-dash (<code>--</code>) prefix, like other options, and it <em>must</em> appear on the command line <em>between</em> the simulation configuration .xml file and the watershed outlet.</p>
      <p>Also be aware that if you accidentally specify two or more filenames on your VelmaAlt command line, one of them <em>will</em> be treated as the relocation file, and VelmaAlt will assume you are starting a multi-map, multi-scale simulation. Since you are not, the run will fail with possibly confusing errors. The specifics of the errors will depend on what the file mistook as a relocation file actually contains.</p>
      <h4><strong>The --kv Option</strong></h4>
      <p>VelmaAlt supports the <code>--kv</code> option in exactly the same way that VelmaSim does.<br> See VelmaSim's <a>explanation</a> for details.</p>
      <p>Care and restraint should <em>always</em> be applied when using <code>--kv</code> options, but even more so with VelmaAlt.<br> VelmaAlt itself almost always overrides the settings of some of the parameter values from the specified simulation configuration. It does this to change the stated outlet location, and to rename the run-index.<br> In particular, avoid overriding the following parameters for VelmaAlt runs:</p>
      <ul>
        <li><code>/calibration/VelmaInputs.properties/run_index</code></li>
        <li><code>/calibration/VelmaInputs.properties/outx</code></li>
        <li><code>/calibration/VelmaInputs.properties/outy</code></li>
        <li><code>/calibration/VelmaInputs.properties/initialReachOutlets</code></li>
      </ul>
      <h4>Special Cases:</h4>
      <ol>
        <li>
          <p>It is sometimes useful to override <code>enableReachMapping</code>, but if you do so, be aware of how the value its set to affects VelmaAlt's <a>watershed delineation</a> and outlet <a>validation</a>.</p>
        </li>
        <li>
          <p>There is one situation where you <em>must</em> override <code>run_index</code>, even though it is generally discouraged for VelmaAlt runs. If you are using VelmaAlt to re-run a sub-reach result of an existing VelmaPar run, <em><strong>and</strong></em> if you overrode the <code>run_index</code> on the orginal VelmaPar command line, then you <em>must</em> use a <code>--kv</code> option to override <code>run_index</code> to <em>exactly the same value</em> you used in the original VelmaPar run.</p>
        </li>
      </ol>
      <h4><em>There is No --lint Option</em></h4>
      <p>VelmaAlt does not allow the <a><code>--lint</code> option supported by VelmaSim</a>.<br> The only ways to "lint check" a VELMA simulation configuration .xml file are with VelmaSim, or in the VelmaGUI environment.</p>
      <blockquote>
        <p>In VelmaGui, clicking the <code>[Edit]->[Check the Current Configuration]</code> menu item has the same effect as running VelmaSim with the <code>--lint</code> option.<br> Any <code>--lint</code> message output is displayed in VelmaGui's "Console" tab.</p>
      </blockquote>
    </div>
  </body>
  <footer id="footer">
    <p>VELMA 2.2 DOCUMENTATION</p>
  </footer>
</html>